<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">


        <link rel="stylesheet" href="base.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>

        <script src="portfolioUpload.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.bundle.min.js"></script>
        <!-- Removed redundant and esm Chart.js scripts to avoid import errors -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script> -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.esm.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/helpers.esm.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/plugins/datalabels.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/plugins/title.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/plugins/responsive.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/min/tiny-slider.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/tiny-slider.css"/>
        <!-- SheetJS for reading XLSX files -->
        <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

        <!-- (Optional) FileSaver.js if you want to save files -->
        <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

        <!-- (Optional) JSZip if you want to create compressed files -->
        <script src="https://cdn.jsdelivr.net/npm/jszip@3.7.1/dist/jszip.min.js"></script>

        <!-- (Optional) Chart.js plugins -->
        <!-- Chart.js plugin: https://chartjs-plugin-datalabels.netlify.app/ -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.6.0/dist/chartjs-plugin-datalabels.min.js"></script>
        <!-- Chart.js plugin: https://chartjs-plugin-title.netlify.app/ -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-title@2.7.1/dist/chartjs-plugin-title.min.js"></script>
        <!-- Chart.js plugin: https://chartjs-plugin-responsiveness.netlify.app/ -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-responsiveness@1.0.3/dist/chartjs-plugin-responsiveness.min.js"></script>
        <!-- Chart.js plugin: https://chartjs-plugin-zoom.netlify.app/ -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7/dist/chartjs-plugin-zoom.min.js"></script>
        <!-- Chart.js plugin: https://chartjs-plugin-legend.netlify.app/ -->
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-legend@2.0.0-rc.1/dist/chartjs-plugin-legend.min.js"></script>

        <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>" type="image/svg+xml">

        <title>Upload Your Portfolio to Analyze</title>

    </head>
    <body>
        <div id="ticker">
            <div class="index" id="dow">
                <span class="name">DOW</span>
                <span class="ticker">DJIA</span>
                <span class="change day positive">+0.50%</span>
                <span class="change month positive">+2.10%</span>
                <span class="change year positive">+5.30%</span>
            </div>
            <div class="index" id="sp500">
                <span class="name">S&P 500</span>
                <span class="ticker">SPX</span>
                <span class="change day negative">-0.20%</span>
                <span class="change month positive">+1.80%</span>
                <span class="change year positive">+4.90%</span>
            </div>
            <div class="index" id="nasdaq">
                <span class="name">NASDAQ</span>
                <span class="ticker">IXIC</span>
                <span class="change day positive">+0.80%</span>
                <span class="change month positive">+3.20%</span>
                <span class="change year positive">+6.50%</span>
            </div>
        </div>
        <header>
            <h1>Synth Intelectus Trading Tools</h1>
        </header>
        <nav>
            <ul>
                <li class="active" id="home"><a href="index.html">Home</a></li>

                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="active"><a href="portfolioUpload.html">Upload Your Portfolio</a></li>
                <li class="active"><a href="editable_table.html">Create Your Portfolio</a></li>
            </ul>
            <div class="hamburger-menu">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
        </nav>
        <main>
            <h2>Upload Portfolio Spreadsheet</h2>
            <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" />
            <button id="uploadBtn">Upload and Analyze</button>
            <button id="addAnotherBtn">Add Another Portfolio</button>
            <div id="portfolioDisplay" style="display: none;">
                <h3>Portfolio Summary</h3>
                <p id="accountValue"></p>
                <p id="totalCostBasis"></p>
                <h3>Positions</h3>
                <table id="positionsTable">
                    <thead id="positionsHead">
                        <tr>
                            <th>Symbol</th>
                            <th>Date of Transaction</th>
                            <th>Last Price $</th>
                            <th>Value $</th>
                            <th>Change $</th>
                            <th>Change %</th>
                            <th>% of Portfolio</th>
                            <th>Qty #</th>
                            <th>Cost/Share</th>
                            <th>Day's Gain $</th>
                            <th>Total Gain $</th>
                            <th>Total Gain %</th>
                            <th>YTD Gain %</th>
                            <th>Dividend Yield %</th>
                            <th>Est. Annual Income</th>
                            <th>Ex-Div Date</th>
                            <th>Dividend Pay Date</th>
                            <th>Dividend</th>
                        </tr>
                    </thead>
                    <tbody id="positionsBody">
                    </tbody>
                </table>
                <button id="updateBtn">Update JSON</button>
                <button id="downloadJsonBtn">Download JSON</button>
                <button id="downloadCsvBtn">Download CSV</button>
            </div>
            <div id="aggregateDisplay" style="display: none;">
                <h3>Aggregate Portfolio</h3>
                <table id="aggregateTable">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Total Shares</th>
                            <th>Total Cost Basis</th>
                            <th>Avg Current Price</th>
                            <th>Total Position Value</th>
                            <th>Avg Dividend Yield</th>
                            <th>Avg Dividend Yield on Cost</th>
                        </tr>
                    </thead>
                    <tbody id="aggregateBody">
                    </tbody>
                </table>
            </div>
        </main>
        <footer>
            <p>&copy; 2025 Synthintellectus V1. All rights reserved.</p>
        </footer>
    </body>
</html>